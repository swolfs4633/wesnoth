{./macros.cfg}

[wml_schema]
    # TODO: Or should we just include {./types}?
    {./types/basic.cfg}
    {./types/formula.cfg}
    [type]
        name=int_percent
        value="-?\d+%?"
    [/type]
    [type]
        name=prog_int
        value=".*"
    [/type]
    [type]
        name="version"
        value="\d+(\.\d+(\.\d+))"
    [/type]
    [type]
        name="text_alignment"
        value="right|left|center"
    [/type]
    [type]
        name="ability_context"
        value="offense|defense|both"
    [/type]
    [type]
        name="ability_apply"
        value="self|opponent|attacker|defender|both"
    [/type]
    [type]
        name="addon_type"
        value="sp|mp|hybrid"
    [/type]
    [type]
        name="gender"
        value="male|female"
    [/type]
    [type]
        name="upkeep"
        value="loyal|free|full|\d+"
    [/type]
    [type]
        name="controller"
        # TODO: Is "computer" a valid value?
        value="ai|computer|human|null|\d+"
    [/type]
    [type]
        name="share_vision"
        value="all|shroud|none"
    [/type]
    [type]
        name="defeat_condition"
        value="no_leader_left|no_units_left|never|always"
    [/type]
    [type]
        name=range
        [list]
            split="-"
            min=1
            max=2
            [element]
                link="int"
            [/element]
        [/list]
    [/type]
    [type]
        name=range_list
        # value="\d+(-\d+)?(,\d+(-\d+)?)*"
        [list]
            [element]
                link="range"
            [/element]
        [/list]
    [/type]
    [type]
        name=prog_string
        value=".*"
    [/type]
    [type]
        name=string_list
        value=".*"
    [/type]
    [type]
        name=alignment
        value="lawful|neutral|chaotic|liminal"
    [/type]
    [type]
        name=ai_usage
        value="scout|fighter|archer|mixed fighter|healer|null"
    [/type]
    [type]
        name=terrain_code
        value="^[A-Za-z\\|/\*\^_]+$"
    [/type]
    [type]
        name=terrain_list
        # value="([A-Za-z\\|/\*\^_]+|!)(,([A-Za-z\\|/\*\^_]+|!))*"
        [list]
            [element]
                link="terrain_code"
            [/element]
            [element]
                value="!"
            [/element]
        [/list]
    [/type]
    [type]
        name=irdya_date
        value="\d+ [A-Z][A-Z]"
    [/type]
    [type]
        name=prog_real
        value=".*"
    [/type]
    [type]
        name="real_list"
        [list]
            [element]
                link="real"
            [/element]
        [/list]
    [/type]
    [type]
        name="dir"
        value="-?([ns][ew]?)(:cc?w)?"
    [/type]
    [type]
        name="dir_list"
        # value="-?([ns][ew]?)(:cc?w)?(,-?([ns][ew]?)(:cc?w)?)*"
        [list]
            [element]
                link="dir"
            [/element]
        [/list]
    [/type]
    [type]
        name="anim_hits"
        value="(hit|no|miss|kill|yes)(,(hit|no|miss|kill|yes))*"
    [/type]
    [type]
        name="color"
        value="\d+,\d+,\d+"
    [/type]
    [type]
        name="hex"
        value="[A-Fa-f0-9][A-Fa-f0-9][A-Fa-f0-9][A-Fa-f0-9][A-Fa-f0-9][A-Fa-f0-9]"
    [/type]
    [type]
        name="hex_list"
        [list]
            split=","
            [element]
                link="hex"
            [/element]
        [/list]
    [/type]
    [type]
        name="server_address"
        value="[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)+:\d+"
    [/type]
    [type]
        name="effect_times"
        [union]
            [type]
                link=int
            [/type]
            [type]
                value="per level"
            [/type]
        [/union]
    [/type]
    [type]
        name="effect_set_special_mode"
        value="append|replace"
    [/type]
    [tag]
        name="root"
        min=1
        {./filters}
        {./core}
        {./units}
        {./terrain}
        {./editor}
        [tag]
            name="lua"
            max=infinite
            [key]
                name="code"
                type="string"
            [/key]
        [/tag]
    [/tag]
[/wml_schema]